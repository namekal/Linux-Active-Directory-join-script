# This file is auto-generated by openmediavault (https://www.openmediavault.org)
# WARNING: Do not edit this file, your changes will get lost.
#======================= Global Settings =======================
[global]
workgroup = %SAMBA_WORKGROUP%
server string = %h server
dns proxy = no
log level = 1
log file = /var/log/samba/log.%m
max log size = 1000
logging = syslog
panic action = /usr/share/samba/panic-action %d
encrypt passwords = true
passdb backend = tdbsam
obey pam restrictions = no
unix password sync = no
passwd program = /usr/bin/passwd %u
passwd chat = *Enter\snew\s*\spassword:* %n\n *Retype\snew\s*\spassword:* %n\n *password\supdated\ssuccessfully* .
pam password change = yes
socket options = TCP_NODELAY IPTOS_LOWDELAY
guest account = nobody
load printers = no
disable spoolss = yes
printing = bsd
printcap name = /dev/null
unix extensions = yes
wide links = no
create mask = 0777
directory mask = 0777
map to guest = Bad User
use sendfile = yes
aio read size = 16384
aio write size = 16384
time server = no
wins support = no
multicast dns register = no
# Special configuration for Apple's Time Machine
fruit:aapl = yes
# Extra options
obey pam restrictions = yes
interfaces = %SAMBA_BIND_INTERFACES%

kerberos method = secrets and keytab
password server = *
realm = %SAMBA_REALM%
security = ads
allow trusted domains = yes
idmap config *:backend = tdb
idmap config *:range = 3000-4000
idmap config %SAMBA_DOMAIN_SHORT%:backend = rid
idmap config %SAMBA_DOMAIN_SHORT%:range = 20000-29999
idmap config %SAMBA_DOMAIN_SHORT%:schema_mode = rfc2307
winbind expand groups = 5
winbind use default domain = true
winbind offline logon = false
winbind enum users = yes
winbind enum groups = yes
winbind separator = /
winbind nested groups = yes
;winbind normalize names = yes
winbind refresh tickets = yes


; If enabled, template homedir, template shell (and template primary group ?) are ignored. They are set from the AD
;winbind nss info = rfc2307
;template primary group = users
template shell = /bin/bash
template homedir = /home/ADS/%D/%U

# Performance improvements
socket options = TCP_NODELAY SO_RCVBUF=8192 SO_SNDBUF=8192

client ntlmv2 auth = yes
client use spnego = yes
